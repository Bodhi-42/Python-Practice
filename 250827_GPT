import numpy as np
import matplotlib.pyplot as plt

class VasicekModel:
    def __init__(self, a, b, sigma, r0, T, n_steps):
        self.a = a
        self.b = b
        self.sigma = sigma
        self.r0 = r0
        self.T = T
        self.n_steps = n_steps
        self.dt = T / n_steps
        self.time = np.linspace(0, T, n_steps + 1)

    def rT(self):
        rates = np.zeros(self.n_steps + 1)
        rates[0] = self.r0
        for t in range(1, self.n_steps + 1):
            dr = self.a * (self.b - rates[t-1]) * self.dt + \
                 self.sigma * np.sqrt(self.dt) * np.random.randn()
            rates[t] = rates[t-1] + dr
        self.rates = rates
        return rates

    def plot_path(self):
        self.rT()
        plt.plot(self.time, self.rates)
        plt.xlabel("Time")
        plt.ylabel("Interest Rate")
        plt.title("Vasicek Interest Rate Simulation")
        plt.show()


vasicek = VasicekModel(
    a=0.1,      # speed of mean reversion
    b=0.05,     # long-term mean
    sigma=0.02, # volatility
    r0=0.03,    # initial rate
    T=1.0,      # 1 year
    n_steps=252 # daily steps
)

vasicek.plot_path()
